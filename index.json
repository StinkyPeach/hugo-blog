[{"contents":" ç»†å¿ƒçš„æœ‹å‹å¯èƒ½å‘ç°äº†ï¼Œwsl2åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œç£ç›˜å ç”¨ç©ºé—´ä¼šè¶Šæ¥è¶Šå¤§ï¼Œä½†æ˜¯å®é™…å ç”¨ç©ºé—´å¯èƒ½æ²¡é‚£ä¹ˆå¤§ï¼Œå¦‚è‹¥ç½®ä¹‹ä¸ç†ï¼Œæœ€åä¼šæ’‘çˆ†æˆ‘ä»¬çš„ç£ç›˜ğŸ¥²ğŸ¥²ğŸ¥²ã€‚\nå…³é—­wsl é¦–å…ˆæˆ‘ä»¬é€šè¿‡ç®¡ç†å‘˜æ¨¡å¼æ‰“å¼€å‘½ä»¤è¡Œçª—å£,æˆ‘è¿™é‡Œå°±ä»¥git-bashæ¥åšæ¼”ç¤ºã€‚\nwsl.exe -l -v wsl.exe --shutdown wsl.exe -l -v åŸå§‹wslç£ç›˜ç©ºé—´ è¿›å…¥å­ç³»ç»Ÿç£ç›˜æ‰€åœ¨ç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤ã€‚\nls -lh å¯ä»¥çœ‹åˆ°ç°åœ¨ç›®å‰å ç”¨ç£ç›˜109Gã€‚\næ³¨æ„ï¼šå‹ç¼©å‰è¯·å°½å¯èƒ½çš„é‡Šæ”¾wsl2å­ç³»ç»Ÿçš„ç£ç›˜ç©ºé—´ï¼Œæ¯”å¦‚åˆ é™¤ä¸éœ€è¦çš„æ–‡ä»¶ï¼Œé•œåƒç­‰\næ‰§è¡Œå‹ç¼© æ‰§è¡Œdiskpartå‘½ä»¤è¿›è¡Œç£ç›˜å‹ç¼©ã€‚\ndiskpart.exe # è¿™é‡Œä½¿ç”¨windowsçš„è·¯å¾„æ ¼å¼,æŒ‡å®šwslçš„ç£ç›˜è·¯å¾„ select vdisk file=\u0026#34;d:\\wsl\\ubuntu-24.04\\ext4.vhdx\u0026#34; å¦‚å›¾ï¼Œå·²ç»é€‰ä¸­ç£ç›˜æ–‡ä»¶ï¼Œæœ€ååªéœ€è¦å‹ç¼©å³å¯ã€‚\n# å‹ç¼© compact vdisk # é€€å‡º exit é™é™ç­‰å¾…å®Œæˆå³å¯ã€‚å¤§æ¦‚å‡ åˆ†é’ŸğŸ˜ğŸ˜ğŸ˜ã€‚\næŸ¥çœ‹å‹ç¼©åçš„ç£ç›˜ç©ºé—´ ls -lh å¯ä»¥çœ‹åˆ°å‹ç¼©ç£ç›˜åï¼Œå ç”¨ç£ç›˜75Gï¼Œå‹ç¼©çš„ç£ç›˜ç©ºé—´å¤§å°å–å†³äºéœ€è¦å…ˆåˆ é™¤å­ç³»ç»Ÿé‡Œçš„ä¸éœ€è¦çš„æ–‡ä»¶ã€‚\n","date":"December 20, 2024 Thursday","permalink":"https://www.litao.in/posts/compact_wsl_disk/","tags":["wsl"],"title":"Compact Disk For WSL2"},{"contents":" æœ¬æ¬¡ä½¿ç”¨kubeadm æ­å»ºk8s é›†ç¾¤ï¼Œæ€»å…±3å°æœåŠ¡å™¨ï¼ˆubuntu20.04)ï¼Œ k8sç‰ˆæœ¬ä¸º1.22.2\nç¯å¢ƒ k8s-master 192.168.30.130 k8s-node1 192.168.30.131 k8s-node2 192.168.30.132 å…³é—­é˜²ç«å¢™ 3å°æœåŠ¡å™¨éƒ½éœ€è¦å…³é—­é˜²ç«å¢™\nufw disable å…³é—­swap 3å°æœåŠ¡å™¨éƒ½éœ€è¦å…³é—­swap\n# ä¸´æ—¶å…³é—­swap swapoff -a # æ°¸ä¹…å…³é—­ sed -ri \u0026#39;s/.*swap.*/#\u0026amp;/\u0026#39; /etc/fstab ä¿®æ”¹ä¸»æœºåç§° # ä¿®æ”¹192.168.30.130 ä¸»æœºåç§°ä¸ºk8s-master hostnamectl set-hostname k8s-master # ä¿®æ”¹192.168.30.131 ä¸»æœºåç§°ä¸ºk8s-node1 hostnamectl set-hostname k8s-node1 # ä¿®æ”¹192.168.30.130 ä¸»æœºåç§°ä¸ºk8s-node2 hostnamectl set-hostname k8s-node2 æ·»åŠ ä¸»æœºåè§£æ 3å°æœåŠ¡å™¨éƒ½éœ€è¦æ·»åŠ \nvim /etc/hosts ## æ·»åŠ ä¸‹åˆ—æ–‡æœ¬ # k8s 192.168.30.130 k8s-master 192.168.30.131 k8s-node1 192.168.30.132 k8s-node2 å®‰è£…docker 3å°æœåŠ¡å™¨éƒ½éœ€è¦å®‰è£…\ncd /home curl -fsSL https://get.docker.com -o get-docker.sh chmod +x get-docker.sh # ä½¿ç”¨é˜¿é‡Œäº‘çš„é•œåƒ ./get-docker.sh --mirror Aliyun # ç­‰å¾…å®‰è£…æˆåŠŸ # ä¿®æ”¹dockeré•œåƒåŠ é€Ÿå’ŒCgroup Driver vim /etc/docker/daemon.json # ä¿®æ”¹ä¸º { \u0026#34;registry-mirrors\u0026#34;: [\u0026#34;https://dhq9bx4f.mirror.aliyuncs.com\u0026#34;], \u0026#34;exec-opts\u0026#34;: [\u0026#34;native.cgroupdriver=systemd\u0026#34;] } # é‡å¯docker systemctl daemon-reload systemctl restart docker å®‰è£… kubelet kubectl kubeadm 3å°æœåŠ¡å™¨éƒ½éœ€è¦å®‰è£…\ncurl -fsSL https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg | apt-key add - #æ–°å¢æº add-apt-repository \u0026#34;deb [arch=amd64] https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main\u0026#34; apt-get update # æŸ¥çœ‹æ˜¯å¦å­˜åœ¨è¯¥ç‰ˆæœ¬ apt-cache madison kubelet kubectl kubeadm | grep \u0026#39;1.22.2-00\u0026#39; apt-get install -y kubelet=1.22.2-00 kubectl=1.22.2-00 kubeadm=1.22.2-00 ## ç­‰å¾…å®‰è£…æˆåŠŸ kubectl version --client=true -o json { \u0026#34;clientVersion\u0026#34;: { \u0026#34;major\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;minor\u0026#34;: \u0026#34;22\u0026#34;, \u0026#34;gitVersion\u0026#34;: \u0026#34;v1.22.2\u0026#34;, \u0026#34;gitCommit\u0026#34;: \u0026#34;8b5a19147530eaac9476b0ab82980b4088bbc1b2\u0026#34;, \u0026#34;gitTreeState\u0026#34;: \u0026#34;clean\u0026#34;, \u0026#34;buildDate\u0026#34;: \u0026#34;2021-09-15T21:38:50Z\u0026#34;, \u0026#34;goVersion\u0026#34;: \u0026#34;go1.16.8\u0026#34;, \u0026#34;compiler\u0026#34;: \u0026#34;gc\u0026#34;, \u0026#34;platform\u0026#34;: \u0026#34;linux/amd64\u0026#34; } } # æœ‰ä»¥ä¸Šæ˜¾ç¤º è¡¨ç¤ºå®‰è£…æˆåŠŸ åˆå§‹åŒ–k8s-master # apiserver-advertise-address ä»£è¡¨ä½ çš„k8s-masterçš„ip # image-repository ä½¿ç”¨é˜¿é‡Œäº‘çš„é•œåƒ kubeadm init \\ --apiserver-advertise-address=192.168.30.130 \\ --image-repository registry.aliyuncs.com/google_containers \\ --kubernetes-version v1.22.2 \\ --ignore-preflight-errors=Swap \\ --pod-network-cidr=10.244.0.0/16 \\ --service-cidr=10.1.0.0/16 ## ç­‰å¾…å®‰è£…ï¼ŒæˆåŠŸåæ‰§è¡Œ # start using your cluster, you need to run the following as a regular user: mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config # Alternatively, if you are the root user, you can run: export KUBECONFIG=/etc/kubernetes/admin.conf # å®‰è£…æˆåŠŸå Your Kubernetes control-plane has initialized successfully! To start using your cluster, you need to run the following as a regular user: mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config Alternatively, if you are the root user, you can run: export KUBECONFIG=/etc/kubernetes/admin.conf You should now deploy a pod network to the cluster. Run \u0026#34;kubectl apply -f [podnetwork].yaml\u0026#34; with one of the options listed at: https://kubernetes.io/docs/concepts/cluster-administration/addons/ Then you can join any number of worker nodes by running the following on each as root: kubeadm join 192.168.30.130:6443 --token 56bthi.poohqb2p2mavk1am \\ --discovery-token-ca-cert-hash sha256:c964563c7a38a633746225ff6d23f40fde626d7d796b01bffb299a84efbdcf82 k8sç½‘ç»œ You should now deploy a pod network to the cluster. Run \u0026ldquo;kubectl apply -f [podnetwork].yaml\u0026rdquo; with one of the options listed at: https://kubernetes.io/docs/concepts/cluster-administration/addons/\nä½¿ç”¨çš„flannelçš„overlay å®ç°å¤šèŠ‚ç‚¹podé€šä¿¡\n# k8s-master kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml # æˆåŠŸåä½¿ç”¨kubectl æŸ¥çœ‹pods kubectl get pods -A kube-system coredns-7f6cbbb7b8-ff64c 1/1 Running 0 23h kube-system coredns-7f6cbbb7b8-txc5w 1/1 Running 0 23h kube-system etcd-k8s-master 1/1 Running 0 23h kube-system kube-apiserver-k8s-master 1/1 Running 0 23h kube-system kube-controller-manager-k8s-master 1/1 Running 0 23h kube-system kube-flannel-ds-8g5st 1/1 Running 0 23h kube-system kube-flannel-ds-njjgg 1/1 Running 0 23h kube-system kube-flannel-ds-v46xq 1/1 Running 0 22h kube-system kube-proxy-l7rxg 1/1 Running 0 23h kube-system kube-proxy-pfcbb 1/1 Running 0 23h kube-system kube-proxy-q289f 1/1 Running 0 22h kube-system kube-scheduler-k8s-master 1/1 Running 0 23h k8s-node åŠ å…¥é›†ç¾¤ # å¤åˆ¶k8s-masterçš„è¾“å‡ºä¿¡æ¯ kubeadm join 192.168.30.130:6443 --token 56bthi.poohqb2p2mavk1am \\ --discovery-token-ca-cert-hash sha256:c964563c7a38a633746225ff6d23f40fde626d7d796b01bffb299a84efbdcf82 # ç­‰å¾…åŠ å…¥æˆåŠŸ kubectl get nodes k8s-master Ready control-plane,master 23h v1.22.2 k8s-node1 Ready \u0026lt;none\u0026gt; 23h v1.22.2 k8s-node2 Ready \u0026lt;none\u0026gt; 23h v1.22.2 æµ‹è¯•k8sé›†ç¾¤ # åˆ›å»ºnginxå®¹å™¨ kubectl create deployment nginx --image=nginx # æš´éœ²å¯¹å¤–ç«¯å£ kubectl expose deployment nginx --port=80 --type=NodePort # æ‰©å®¹å‰¯æœ¬ kubectl scale deployment nginx --replicas=3 # æŸ¥çœ‹nginxæ˜¯å¦è¿è¡ŒæˆåŠŸ kubectl get pod,svc NAME READY STATUS RESTARTS AGE pod/nginx-6799fc88d8-2bps9 1/1 Running 0 23h pod/nginx-6799fc88d8-9psfx 1/1 Running 0 22h pod/nginx-6799fc88d8-tnfrk 1/1 Running 0 22h NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/kubernetes ClusterIP 10.96.0.1 \u0026lt;none\u0026gt; 443/TCP 23h service/nginx NodePort 10.102.105.92 \u0026lt;none\u0026gt; 80:31150/TCP 23h root@k8s-master:~# # æµè§ˆå™¨è®¿é—® http://192.168.30.130:31150 http://192.168.30.131:31150 http://192.168.30.132:31150 å‡å¯ä»¥æˆåŠŸè®¿é—® ","date":"December 10, 2024 Thursday","permalink":"https://www.litao.in/posts/k8s_cluster_construction/","tags":["k8s"],"title":"K8s Cluster Construction"},{"contents":"è¿™æ˜¯æœ¬åšå®¢çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œä»¥åä¼šæ…¢æ…¢æ›´æ–°ä¸€äº›å¹³æ—¶æˆ‘è§‰çš„æœ‰æ„æ€çš„æ–‡ç« ï¼Œæ¯”å¦‚ç”Ÿæ´»ï¼ŒæŠ€æœ¯ï¼Œå¿ƒæƒ…ç­‰ã€‚\nä¸‹é¢æ˜¯æœ¬åšå®¢å¤§æ¦‚éƒ¨åˆ†ä¸»é¢˜æˆªå›¾ã€‚\nå¥½ï¼ä»Šå¤©ç»“æŸï¼\nScreenshots Home blog archive search about reward 404 Quick Start The simplest way is to start with the example site coming with this theme, then you can play around and add your own stuff.\n$ mkdir hugo_test \u0026amp;\u0026amp; cd hugo_test $ mkdir themes \u0026amp;\u0026amp; cd themes $ git clone https://github.com/StinkyPeach/hugo-simple-theme.git $ cp -r hugo-simple-theme/exampleSite/** ../ $ cd .. $ hugo serve -D --port 8000 Now enter localhost:8000 in the address bar of your browser.\nWechat Pay \u0026amp; Alipay Rewards You can enable Wechat Pay \u0026amp; Alipay to allow readers send you money. So if they like your articles, you may even get rewards from your writing. Now you must be motivated to write more.\nIf this helps you, if you can star this repository, I will be very grateful, thank you!\n","date":"November 26, 2024 Thursday","permalink":"https://www.litao.in/posts/welcome_to_my_blog/","tags":null,"title":"Welcome To My Blog"}]